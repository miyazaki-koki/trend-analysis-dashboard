---
name: business-knowledge
description: トレンド分析ダッシュボードの業務知識。時系列分析、データ可視化、KPI・メトリクス、ダッシュボード設計の基本概念と実装ルール。チャート機能実装時、メトリクス定義時、可視化設計時に使用。
allowed-tools: Read, Glob, Grep
---

# トレンド分析ダッシュボード 業務知識

データトレンド分析とダッシュボード可視化のドメイン知識です。

## サービス概要

**トレンド分析ダッシュボード**: データトレンド可視化・分析SPA

### ターゲットユーザー

- データアナリスト
- ビジネスマネージャー
- 意思決定者

### コア機能

1. **時系列データ管理** - トレンドデータの収集・保存
2. **トレンド分析** - 移動平均、変化率、季節性分析
3. **ダッシュボード可視化** - 複数チャート・KPI表示
4. **データフィルタリング** - 期間・カテゴリ・メトリクス検索

---

## 時系列分析（Time Series Analysis）

### 主要概念

| 概念 | 説明 |
|-----|------|
| 時系列データ | 時間順序で並んだメトリクス値の集合 |
| トレンド | 長期的な上昇/下降傾向 |
| 季節性 | 定期的な周期的変動（日次、週次、月次等） |
| ノイズ | ランダムな短期変動 |

### トレンド種別

| トレンド | 説明 | 検出方法 |
|---------|------|---------|
| 上昇トレンド | 時間とともに値が増加 | 移動平均、傾向線 |
| 下降トレンド | 時間とともに値が減少 | 移動平均、傾向線 |
| 横ばい | 値の増減がない | 標準偏差が低い |
| 変動 | 急激な上下変動 | ボラティリティ計測 |

---

## トレンド検出手法

### 移動平均（Moving Average）

```typescript
// 単純移動平均 (SMA)
SMA(n) = (今日の値 + 1日前 + ... + n日前) / n

// 用途:
// - 7日SMA: 週間トレンド
// - 30日SMA: 月間トレンド
// - ノイズ除去
```

### 変化率（Rate of Change）

```typescript
// 日次変化率
ROC = (今日の値 - 昨日の値) / 昨日の値 × 100%

// 用途:
// - 成長率表示
// - 前年同期比較
// - パフォーマンス監視
```

### 季節性分析

```typescript
// 季節指数
Seasonal Index = 実績値 / トレンド値

// 用途:
// - 売上のピークシーズン検出
// - 需要予測
// - 異常値検出
```

---

## データ可視化（Data Visualization）

### チャート種別とKPI・メトリクス

| チャート型 | 用途 | 推奨メトリクス |
|-----------|------|---------------|
| 折れ線グラフ | トレンド推移 | 売上、訪問数、クリック数 |
| 棒グラフ | カテゴリ比較 | 地域別売上、製品別数量 |
| エリアチャート | 累積変化 | 累積売上、ポートフォリオ |
| 散布図 | 相関分析 | 価格 vs 販売数 |
| ゲージ | KPI達成度 | 進捗率、達成度 |

### チャート設計原則

1. **1チャート = 1メッセージ**: 複数の概念を詰め込まない
2. **視点の明確さ**: 軸、単位、凡例を明確に
3. **色の一貫性**: 同じメトリクスは常に同じ色
4. **スケール適切化**: Y軸の範囲を意図的に設定

---

## KPI・メトリクスの定義

### KPI（Key Performance Indicator）

主要成果指標：ビジネス目標の達成を測定する主要指標

#### 良いKPI の3要素

1. **測定可能性**: 数値で定量化できる
2. **行動駆動性**: チームが改善アクションを起こせる
3. **所有者の明確化**: 責任者が決まっている

### メトリクス種別

| メトリクス | 説明 | 計算方法 |
|-----------|------|---------|
| アブソリュート | 絶対値 | 単純な集計値 |
| レート | 率・比率 | 分子 / 分母 × 100% |
| グロース | 成長率 | (新 - 旧) / 旧 × 100% |
| トレンド | 傾向 | 移動平均で平滑化 |

### メトリクス例

```typescript
// 売上関連
- 日次売上（絶対値）
- 売上成長率（グロース）
- 顧客あたり平均売上（レート）
- 売上トレンド（移動平均）

// 顧客関連
- 新規顧客数（アブソリュート）
- 顧客獲得コスト（レート）
- 顧客生涯価値（計算値）
- チャーン率（レート）

// 運用関連
- 処理時間（アブソリュート）
- エラー率（レート）
- システム稼働率（レート）
- 応答時間（アブソリュート）
```

---

## ダッシュボード設計原則

### レイアウトパターン

```
┌─────────────────────────────────────┐
│  タイトル・期間フィルタ              │
├─────────────────────────────────────┤
│ KPI1    KPI2    KPI3    KPI4       │  ← サマリーカード
├─────────────────────────────────────┤
│                                      │
│   メインチャート（大）               │
│   （折れ線グラフ、エリアチャート）   │
│                                      │
├─────────────────────────────────────┤
│ 比較チャート1 │ 比較チャート2       │  ← 2-3列グリッド
├─────────────────────────────────────┤
│        詳細テーブル                  │  ← ドリルダウン用
└─────────────────────────────────────┘
```

### デザイン原則

1. **情報階層**: 最重要KPI を目立たせる
2. **スキャナビリティ**: 上から下へ、左から右へ
3. **グループ化**: 関連メトリクスを近くに配置
4. **余白**: 詰め込みすぎない

### インタラクション設計

| 機能 | 説明 | 実装方法 |
|-----|------|---------|
| フィルタリング | 期間・カテゴリで絞込 | DateRange, Select |
| ドリルダウン | 詳細データへ移動 | テーブル行クリック |
| ハイライト | シリーズをハイライト | 凡例クリック、ホバー |
| ツールチップ | 詳細値表示 | Recharts Tooltip |

---

## カラーパレット（チャート用）

### メトリクス用 8 色スキーム

```typescript
chart: {
  1: '#0EA5E9',  // Sky Blue (Primary)
  2: '#14B8A6',  // Teal (Accent)
  3: '#F97316',  // Orange
  4: '#8B5CF6',  // Purple
  5: '#EC4899',  // Pink
  6: '#06B6D4',  // Cyan
  7: '#10B981',  // Emerald
  8: '#F59E0B',  // Amber
}

// 使用ルール:
// - 最大 8 系列まで（それ以上は見分けにくい）
// - 色の順序は固定（ソート時も順序変わらず）
// - グレースケール印刷対応は別途検討
```

---

## 共通ルール

### データ集計

```typescript
// 時系列データの集計単位
daily: 日次集計
weekly: 週次集計（月曜開始）
monthly: 月次集計
quarterly: 四半期集計
yearly: 年次集計
```

### 日付フォーマット

```typescript
// 表示フォーマット
display: 'YYYY-MM-DD'  // ISO 8601形式
japanese: 'YYYY年MM月DD日'

// API/DB フォーマット
iso: 'YYYY-MM-DDTHH:mm:ssZ'  // ISO 8601
unix: epoch timestamp
```

### タイムゾーン

- すべての時系列データ: UTC で保存
- 表示時: ユーザーのローカルタイムゾーン（日本時間 JST を想定）

---

## 関連ドキュメント

詳細は以下を参照:
- [DESIGN_RULE.md](../../DESIGN_RULE.md) - デザインシステム
- [README.md](../../README.md) - プロジェクト概要
